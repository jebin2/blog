<svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="400" y="30" font-size="20" font-weight="bold" text-anchor="middle" fill="#333">
    How the CPU Knows What to Execute
  </text>
  
  <!-- Memory Block -->
  <rect x="50" y="80" width="200" height="400" fill="#e8f4f8" stroke="#2c5aa0" stroke-width="2"/>
  <text x="150" y="105" font-size="16" font-weight="bold" text-anchor="middle" fill="#2c5aa0">MEMORY</text>
  
  <!-- Memory addresses and data -->
  <g font-family="monospace" font-size="12">
    <text x="70" y="140" fill="#666">0x1000:</text>
    <text x="150" y="140" fill="#888">10110101</text>
    
    <text x="70" y="170" fill="#666">0x1004:</text>
    <text x="150" y="170" fill="#888">01001100</text>
    
    <text x="70" y="200" fill="#666">0x1008:</text>
    <rect x="130" y="185" width="90" height="20" fill="#90EE90" stroke="#228B22" stroke-width="2"/>
    <text x="150" y="200" fill="#000" font-weight="bold">MOV AX, 5</text>
    
    <text x="70" y="230" fill="#666">0x100C:</text>
    <text x="150" y="230" fill="#000">ADD AX, 3</text>
    
    <text x="70" y="260" fill="#666">0x1010:</text>
    <text x="150" y="260" fill="#000">JMP 0x2000</text>
    
    <text x="70" y="290" fill="#666">0x1014:</text>
    <text x="150" y="290" fill="#888">11001001</text>
    
    <text x="85" y="330" fill="#999">...</text>
    
    <text x="70" y="380" fill="#666">0x2000:</text>
    <text x="150" y="380" fill="#888">01110011</text>
    
    <text x="70" y="410" fill="#666">0x2004:</text>
    <text x="150" y="410" fill="#888">10101010</text>
  </g>
  
  <!-- CPU Block -->
  <rect x="400" y="150" width="300" height="250" fill="#fff5e6" stroke="#ff8c00" stroke-width="3" rx="10"/>
  <text x="550" y="180" font-size="18" font-weight="bold" text-anchor="middle" fill="#ff8c00">CPU</text>
  
  <!-- IP/PC Register -->
  <rect x="420" y="200" width="260" height="60" fill="#ffeb99" stroke="#ff6600" stroke-width="2" rx="5"/>
  <text x="550" y="220" font-size="14" font-weight="bold" text-anchor="middle" fill="#ff6600">
    Instruction Pointer (IP/PC)
  </text>
  <text x="550" y="245" font-size="20" font-family="monospace" text-anchor="middle" fill="#000" font-weight="bold">
    0x1008
  </text>
  
  <!-- Fetch instruction text -->
  <text x="550" y="295" font-size="13" text-anchor="middle" fill="#333">
    Points to next instruction
  </text>
  <text x="550" y="315" font-size="13" text-anchor="middle" fill="#333">
    CPU fetches from this address
  </text>
  
  <!-- Execute area -->
  <rect x="420" y="330" width="260" height="50" fill="#d4edda" stroke="#28a745" stroke-width="2" rx="5"/>
  <text x="550" y="350" font-size="12" text-anchor="middle" fill="#155724">Current Instruction:</text>
  <text x="550" y="368" font-size="14" font-family="monospace" text-anchor="middle" fill="#000" font-weight="bold">
    MOV AX, 5
  </text>
  
  <!-- Arrow from IP to Memory -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#ff0000"/>
    </marker>
  </defs>
  
  <path d="M 420 230 Q 300 230, 250 200" stroke="#ff0000" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  <text x="310" y="210" font-size="13" fill="#ff0000" font-weight="bold">Fetch from here</text>
  
  <!-- Kernel loading section -->
  <rect x="50" y="500" width="650" height="80" fill="#f0f0f0" stroke="#666" stroke-width="2" rx="5"/>
  <text x="375" y="525" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">
    1. Kernel loads program into memory
  </text>
  <text x="375" y="545" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">
    2. Kernel sets IP/PC to entry point (e.g., 0x1008)
  </text>
  <text x="375" y="565" font-size="14" font-weight="bold" text-anchor="middle" fill="#333">
    3. CPU executes instructions from IP/PC address onward
  </text>
  
  <!-- Key insight -->
  <ellipse cx="550" cy="440" rx="120" ry="30" fill="#ffe6e6" stroke="#dc3545" stroke-width="2"/>
  <text x="550" y="438" font-size="12" text-anchor="middle" fill="#721c24" font-weight="bold">
    IP/PC determines
  </text>
  <text x="550" y="452" font-size="12" text-anchor="middle" fill="#721c24" font-weight="bold">
    what is CODE
  </text>
</svg>